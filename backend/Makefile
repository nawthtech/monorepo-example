# Makefile for NawthTech Backend

.PHONY: help build run test clean deps migrate

# ุงููุณุงุนุฏุฉ
help:
	@echo "ุฃูุงูุฑ NawthTech Backend ุงููุชุงุญุฉ:"
	@echo ""
	@echo "  build     - ุจูุงุก ุงูุชุทุจูู"
	@echo "  run       - ุชุดุบูู ุงูุชุทุจูู (ุงูุชุทููุฑ)"
	@echo "  test      - ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช"
	@echo "  clean     - ุชูุธูู ุงููููุงุช ุงููุจููุฉ"
	@echo "  deps      - ุชุญุฏูุซ ุงูุงุนุชูุงุฏุงุช"
	@echo "  migrate   - ุชุดุบูู ุชุฑุญูู ูุงุนุฏุฉ ุงูุจูุงูุงุช"
	@echo "  docker    - ุจูุงุก ุตูุฑุฉ Docker"
	@echo ""

# ุจูุงุก ุงูุชุทุจูู
build:
	@echo "๐๏ธ  ุจูุงุก ุชุทุจูู ููุฐ ุชู..."
	go build -o bin/nawthtech main.go

# ุชุดุบูู ุงูุชุทุจูู (ุงูุชุทููุฑ)
run:
	@echo "๐ ุชุดุบูู ุฎุงุฏู ุงูุชุทููุฑ..."
	go run main.go server --env development

# ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
test:
	@echo "๐งช ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช..."
	go test -v ./...

# ุชูุธูู ุงููููุงุช ุงููุจููุฉ
clean:
	@echo "๐งน ุชูุธูู ุงููููุงุช ุงููุจููุฉ..."
	rm -rf bin/
	rm -rf coverage.txt

# ุชุญุฏูุซ ุงูุงุนุชูุงุฏุงุช
deps:
	@echo "๐ฆ ุชุญุฏูุซ ุงุนุชูุงุฏุงุช Go..."
	go mod tidy
	go mod download

# ุชุฑุญูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
migrate:
	@echo "๐๏ธ  ุชุดุบูู ุชุฑุญูู ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
	go run main.go migrate --direction up

# ุจูุงุก ุตูุฑุฉ Docker
docker:
	@echo "๐ณ ุจูุงุก ุตูุฑุฉ Docker..."
	docker build -t nawthtech/backend:latest .

# ูุญุต ุงูุตุญุฉ
health:
	@echo "๐ ูุญุต ุตุญุฉ ุงููุธุงู..."
	go run main.go health

# ุนุฑุถ ุงูุฅุตุฏุงุฑ
version:
	@echo "๐ ุนุฑุถ ูุนูููุงุช ุงูุฅุตุฏุงุฑ..."
	go run main.go version

# ุงูุชูุณูู ุงูุชููุงุฆู
fmt:
	@echo "๐จ ุชูุณูู ุงูููุฏ..."
	go fmt ./...

# ุงูุชุญูู ูู ุงูููุฏ
vet:
	@echo "๐ ุงูุชุญูู ูู ุงูููุฏ..."
	go vet ./...